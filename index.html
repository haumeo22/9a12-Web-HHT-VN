<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>9A12 - Trang web l·ªõp h·ªçc</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      overflow-x: hidden;
    }

    /* ===== TOP NAVBAR (STICKY FOR SECTION 1 & 2) ===== */
:root { --topbar-h: 80px; } /* adjust if your top bar is taller/shorter */

/* Top navbar: improved separation shadow + subtle dark bottom gradient */
.top-navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--topbar-h, 80px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 30px;
  background: linear-gradient(to bottom, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
  z-index: 1000;
  transition: opacity .25s ease, transform .25s ease;
  box-shadow:
    0 6px 20px rgba(0,0,0,0.08),     /* main drop shadow */
    0 2px 6px rgba(0,0,0,0.04) ;     /* subtle layering */
  border-bottom: 1px solid rgba(0,0,0,0.04);
}

/* subtle darker band at bottom using pseudo element (gives more separation) */
.top-navbar::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px; /* sits exactly on the edge */
  height: 22px;
  pointer-events: none;
  background: linear-gradient(to bottom, rgba(0,0,0,0.03), rgba(0,0,0,0.08));
  filter: blur(6px);
  z-index: 999;
}
/* hidden state used by JS */
.top-navbar.hidden {
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
  transform: translateY(-100%);
}


.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 26px;
  font-weight: 700;
}

.logo-img {
  width: 40px;
  height: 40px;
  object-fit: contain;
  border-radius: 6px; /* optional */
}

    .search-bar {
      flex: 1;
      max-width: 400px;
      margin: 0 30px;
    }

    .search-bar input {
      width: 100%;
      padding: 12px 20px 12px 45px;
      border: 2px solid #e0e0e0;
      border-radius: 25px;
      font-size: 14px;
      background: #f5f5f5;
      transition: all 0.3s;
    }

    .search-bar input:focus {
      outline: none;
      border-color: #ffd700;
      background: white;
    }

    .top-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .hotline-btn, .login-btn, .settings-btn {
      padding: 10px 20px;
      border-radius: 25px;
      border: 2px solid;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      background: white;
    }

    .hotline-btn {
      background: #ff6b6b;
      color: white;
      border-color: #ff6b6b;
      line-height: 1.3;
    }

    .hotline-btn:hover {
      background: #ff5252;
      transform: scale(1.05);
    }

    .login-btn {
      color: #ffd700;
      border-color: #ffd700;
    }

    .login-btn:hover {
      background: #ffd700;
      color: white;
    }

    .settings-btn {
      border-color: #ccc;
      padding: 10px 15px;
      font-size: 18px;
    }

    /* ===== HERO CONTAINER (SHRINKS ON SCROLL) ===== */
.hero-container {
  position: relative; /* not sticky */
  height: calc(100vh - var(--topbar-h)); /* fills viewport under the top bar */
  overflow: hidden;
  transition: none; /* JS will set height if needed; no CSS height transitions */
  z-index: 10;
}
    .hero-container.stopped {
  position: relative;        /* no longer sticky */
  top: auto;
  height: 300px;             /* adjust to the compact height you want */
  overflow: hidden;
}

    .hero-container.shrunk {
      height: 300px;
    }

    .hero-container.fixed-height {
      height: 300px;
    }


    .hero-image-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.7);
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .hero-title {
      font-size: 9rem;
      font-weight: 900;
      color: #ffd700;
      text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 
                   0 0 60px rgba(255, 215, 0, 0.4);
      letter-spacing: 30px;
      animation: glow 2s ease-in-out infinite alternate;
    transition: transform .22s ease, opacity .22s ease;
    }

    .hero-container.shrunk .hero-title {
      font-size: 5rem;
      letter-spacing: 20px;
    }

    @keyframes glow {
      from { text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 215, 0, 0.4); }
      to { text-shadow: 0 0 40px rgba(255, 215, 0, 1), 0 0 80px rgba(255, 215, 0, 0.6); }
    }

    .star-decoration {
      position: absolute;
      color: #ffd700;
      font-size: 3rem;
      animation: twinkle 2s ease-in-out infinite;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
      transition: opacity 0.3s;
    }

    .hero-container.shrunk .star-decoration {
      opacity: 0;
    }

    .star-1 { top: 15%; left: 15%; animation-delay: 0s; }
    .star-2 { top: 20%; right: 15%; animation-delay: 0.5s; }
    .star-3 { bottom: 20%; left: 20%; animation-delay: 1s; }
    .star-4 { bottom: 25%; right: 20%; animation-delay: 1.5s; }

    @keyframes twinkle {
      0%, 100% { opacity: 0.6; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    .scroll-indicator {
      position: absolute;
      bottom: 30px;
      color: white;
      font-size: 14px;
      text-align: center;
      cursor: pointer;
      animation: bounce 2s infinite;
      transition: opacity 0.3s;
    }

    .hero-container.shrunk .scroll-indicator {
      opacity: 0;
      pointer-events: none;
    }

    .scroll-indicator svg {
      width: 30px;
      height: 30px;
      margin-top: 8px;
      fill: white;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(10px); }
    }

    /* ===== SECTION 1: HERO SPACER ===== */
.hero-section {
  height: 0; 
  display: block;
}
    /* ===== SECTION 2: MAIN CONTENT ===== */
    .content-section {
      min-height: 100vh;
      background: white;
      position: relative;
      z-index: 2;
      margin-top: -1px;
    }
    #topbar-spacer {
  height: var(--topbar-h, 80px);
}
    #nav-spacer {
  height: 0;
  transition: height .25s ease;
}


    /* Main Navigation */
.main-nav {
  position: sticky;
  top: 80px; /* same height as your topbar */
  z-index: 999;

  display: flex;
  justify-content: center;
  padding: 0;
  background: linear-gradient(to bottom, #ffffff, #f4f4f4);
  background: rgba(255, 255, 255, 0.7); /* transparent glassy base */
  backdrop-filter: blur(10px) saturate(180%);
  -webkit-backdrop-filter: blur(10px) saturate(180%);

  border-bottom: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);

  transition: background 0.3s ease, top 0.3s ease, box-shadow 0.3s ease;
}

.main-nav::after {
  content: "";
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 100%;
  height: 8px;
  background: linear-gradient(to bottom, rgba(255,255,255,0.4), transparent);
  pointer-events: none;
}


.main-nav.fixed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  box-shadow: 0 6px 24px rgba(0,0,0,0.06);
  z-index: 1100;
}
.nav-list{
  display:flex;
  gap:20px;
  list-style:none;
  justify-content:center; /* center items */
  align-items:center;
  padding:10px 20px;
  margin:0 auto;
  max-width:1200px;
}
.nav-item {
  position: relative;
}

.nav-item > a {
  padding: 10px 5px;
  display: inline-block;
}

.drop-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 12px;
  padding: 10px 2px;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  border-radius: 8px;
  padding: 8px 0;
  box-shadow: 0 3px 10px rgba(0,0,0,.15);
  display: none;
  flex-direction: column;
  min-width: 200px;
  z-index: 1000;
}

.dropdown-menu li a {
  padding: 8px 12px;
  display: block;
  white-space: nowrap;
}

.dropdown-menu li a:hover {
  background: #f2f2f2;
}

/* show on hover */
.nav-item.dropdown:hover .dropdown-menu {
  display: flex;
}

/* coming soon style */
.coming-soon {
  opacity: .6;
  pointer-events: none;
}

/* when hero shrinks, it stays where it is */
.hero-container.shrunk ~ .content-section .main-nav {
  top: 80px;
}
    /* placeholder used to preserve flow when nav becomes fixed */
.nav-placeholder { display:block; width:100%; height:0; }

/* smooth height transition for hero to reduce jumpiness */
.hero-container {
  transition: height 0.28s cubic-bezier(.2,.8,.2,1), top 0.25s ease-out;
}
    /* when top navbar hidden = nav moves up */
.top-navbar.hidden + .hero-container + .hero-section + .content-section .main-nav {
  top: 0;
}

    .nav-items {
      display: flex;
      list-style: none;
      gap: 5px;
      margin: 0;
      padding: 0;
    }

    .nav-item {
      padding: 18px 35px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: #555;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
      white-space: nowrap;
    }

    .nav-item:hover, .nav-item.active {
      color: #ffd700;
      background: #fffbf0;
      border-bottom-color: #ffd700;
    }

    .content-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    .content-section.nav-fixed-padding { padding-top: calc(var(--main-nav-height,60px) + 16px); }

    /* HOT SECTION */
    .hot-section {
      margin-bottom: 40px;
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }

    .hot-events-container {
      flex: 1;
    }

    .hot-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
      color: #ff6b6b;
      font-size: 2rem;
      font-weight: bold;
    }

    .fire-icon {
      font-size: 2.5rem;
      animation: fire 1s infinite;
    }

    @keyframes fire {
      0%, 100% { transform: scale(1) rotate(-5deg); }
      50% { transform: scale(1.1) rotate(5deg); }
    }

    .events-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .event-item {
      display: flex;
      align-items: center;
      padding: 20px;
      background: white;
      border: 2px solid #f0f0f0;
      border-radius: 12px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .event-item:hover {
      border-color: #ffd700;
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
      transform: translateY(-3px);
    }

    .event-date {
      background: linear-gradient(135deg, #ff6b6b, #ff8e53);
      color: white;
      padding: 15px 20px;
      border-radius: 10px;
      text-align: center;
      min-width: 80px;
      margin-right: 20px;
      font-weight: bold;
    }

    .event-date .day {
      font-size: 28px;
      display: block;
    }

    .event-date .month {
      font-size: 14px;
      opacity: 0.9;
    }

    .event-details {
      flex: 1;
    }

    .event-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }

    .event-desc {
      color: #777;
      font-size: 14px;
    }

    /* SIDE IMAGE */
    .side-image-container {
      width: 450px;
      flex-shrink: 0;
    }

    .side-featured-image {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 3px solid #ffd700;
    }

    /* ===== SECTION 3: BLANK ===== */
    .blank-section {
      min-height: 100vh;
      background: #f8f9fa;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 2rem;
    }

    @media (max-width: 968px) {
      .hero-title {
        font-size: 5rem !important;
        letter-spacing: 15px !important;
      }

      .hero-container.shrunk .hero-title {
        font-size: 3rem !important;
        letter-spacing: 10px !important;
      }

      .hot-section {
        flex-direction: column;
      }
      
      .side-image-container {
        width: 100%;
      }

      .nav-item {
        padding: 15px 20px;
        font-size: 14px;
      }
    }
.reveal {
  opacity: 0;
  transform: translateY(40px);
  filter: blur(6px);
  transition:
    opacity .7s ease,
    transform .7s ease,
    filter .7s ease;
}

/* When visible */
.reveal.show {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
}
    
/* Target navs and dropdowns explicitly (high specificity) */
.top-navbar a,
.topbar a,
.main-nav a,
.nav-list a,
.nav-item a,
.nav-list .main-link,
.dropdown-menu a,
.topnav .nav-link {
  color: inherit !important;              /* follow surrounding color */
  text-decoration: none !important;       /* remove underline everywhere */
  -webkit-text-decoration-skip-ink: auto; /* avoid weird underlines on some browsers */
  outline: none !important;
  background: transparent;                /* avoid default link backgrounds */
}

/* Also handle link states explicitly */
.top-navbar a:link,
.top-navbar a:visited,
.main-nav a:link,
.main-nav a:visited,
.nav-list a:link,
.nav-list a:visited {
  color: inherit !important;
  text-decoration: none !important;
}

/* Hover / active state: change color but still no underline */
.top-navbar a:hover,
.main-nav a:hover,
.nav-list a:hover,
.nav-item a:hover,
.nav-list .main-link:hover {
  color: #d18f00 !important;   /* or any accent color you prefer */
  text-decoration: none !important;
}

/* Keyboard focus: keep accessibility but style nicely */
.top-navbar a:focus,
.main-nav a:focus,
.nav-list a:focus {
  text-decoration: none !important;
  outline: none !important;
  box-shadow: 0 0 0 4px rgba(209,143,0,0.12);
  border-radius: 8px;
}

/* If your nav items use <img> icons, ensure images don't produce baseline gaps */
.nav-icon { display: inline-block; vertical-align: middle; }

/* Make nav links act like buttons (prevents underlines from sneaking in) */
.nav-list .nav-item a,
.main-nav .nav-item a {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
    
  </style>
</head>
<body>
  <!-- TOP NAVBAR (STICKY) -->
  <nav class="top-navbar" id="topNavbar">
   <!-- Top-left brand (replace your existing .logo block with this) -->
<div class="logo" aria-label="9A12 logo">
  <!-- Primary image (use assets/ folder for consistency) -->
  <img src="assets/9A12-removebg.png"
       alt="9A12 logo"
       class="logo-img"
       id="logoImg"
       onerror="this.style.display='none'; document.getElementById('logoFallback').style.display='flex';" />

  <!-- Fallback (hidden by default) ‚Äî simple SVG that always works -->
  <div id="logoFallback" class="logo-fallback" style="display:none; align-items:center; gap:8px;">
    <svg width="40" height="40" viewBox="0 0 100 100" aria-hidden="true" role="img">
      <circle cx="50" cy="50" r="45" fill="#bdbdbd"/>
      <text x="50" y="58" text-anchor="middle" font-family="Inter, sans-serif" font-size="38" fill="#222">9</text>
    </svg>
    <span class="brand-text">9A12</span>
  </div>

  <!-- Keep your text label so the brand is always visible -->
  <span class="brand-text" style="margin-left:8px;">9A12</span>
</div>
    
    <div class="search-bar">
      <input type="text" placeholder="what do you want to find">
    </div>
    
    <div class="top-actions">
      <button class="hotline-btn">‚òé Hotline<br>0123456789</button>
      <button class="login-btn">üë§ ƒêƒÉng nh·∫≠p/ ƒêƒÉng K√Ω</button>
      <button class="settings-btn">‚öô</button>
    </div>
  </nav>
  <div id="topbar-spacer"></div>
<div id="nav-spacer"></div>

  <!-- HERO CONTAINER (STICKY, SHRINKS ON SCROLL) -->
  <div class="hero-container" id="heroContainer">
    <div class="hero-image-wrapper">
      <img src="assets/IMG_2873.JPG" alt="Class 9A12" class="hero-image">
      <div class="hero-overlay">
        <div class="star-decoration star-1">‚ú¶</div>
        <div class="star-decoration star-2">‚ú¶</div>
        <div class="star-decoration star-3">‚ú¶</div>
        <div class="star-decoration star-4">‚ú¶</div>
        
        <h1 class="hero-title">9A12</h1>
        
        <div class="scroll-indicator" onclick="scrollToContent()">
          <div>Cu·ªôn xu·ªëng</div>
          <svg viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 1: HERO SPACER -->
  <section class="hero-section" id="heroSection"></section>

  <!-- SECTION 2: MAIN CONTENT -->
  <section class="content-section" id="content">
    <!-- Main Navigation -->
    <nav class="main-nav">
<ul class="nav-list">
  <li class="nav-item"><a href="#home" data-target="#heroSection"><img src="assets/icon-home.png" alt="" class="nav-icon">Trang Ch·ªß</a></li>

  <li class="nav-item dropdown">
    <a class="main-link" href="#gioithieu-chung" data-target="#gioithieu"><img src="assets/icon-info.png" alt="" class="nav-icon">Gi·ªõi Thi·ªáu</a>
    <button class="drop-btn">‚ñº</button>
    <ul class="dropdown-menu">
      <li><a href="#gioithieu-chung" data-target="#gioithieu">Gi·ªõi thi·ªáu chung l·ªõp</a></li>
      <li><a href="#danh-sach-lop" data-target="#danh-sach-lop">Danh s√°ch l·ªõp</a></li>
      <li><a href="#lien-he" data-target="#lien-he">Li√™n h·ªá & credit</a></li>
    </ul>
  </li>

  <li class="nav-item dropdown">
    <a class="main-link" href="#doanh-nhan-nhi" data-target="#cuaHang"><img src="assets/icon-shop.png" alt="" class="nav-icon">C·ª≠a H√†ng</a>
    <button class="drop-btn">‚ñº</button>
    <ul class="dropdown-menu">
      <li><a href="#doanh-nhan-nhi" data-target="#cuaHang">Doanh nh√¢n nh√≠</a></li>
      <li><a class="coming-soon">Other (Coming Soon)</a></li>
    </ul>
  </li>

  <!-- SWAPPED: this nav item used to be "Ho·∫°t ƒê·ªông" ‚Äî now it becomes "Tin T·ª©c" -->
  <li class="nav-item dropdown">
    <a class="main-link" href="#tinTuc" data-target="#tinTuc"><img src="assets/icon-news.png" alt="" class="nav-icon">Tin T·ª©c</a>
    <button class="drop-btn">‚ñº</button>
    <ul class="dropdown-menu">
      <li><a href="#tinTuc" data-target="#tinTuc">H√†nh Tr√¨nh</a></li> <!-- we add H√†nh Tr√¨nh here -->
      <li><a href="#thu-vien" data-target="#thu-vien">Th∆∞ vi·ªán</a></li>
      <li><a href="#bai-dang" data-target="#bai-dang">B√†i ƒëƒÉng</a></li>
      <li><a href="#bai-dang" data-target="#Hanh-trinh">H√†nh tr√¨nh</a></li>
    </ul>
  </li>

  <!-- SWAPPED: this nav item used to be "Tin T·ª©c" ‚Äî now it becomes "Ho·∫°t ƒê·ªông" -->
  <li class="nav-item"><a href="#hoatDong" data-target="#hoatDong"><img src="assets/icon-activity.png" alt="" class="nav-icon">Ho·∫°t ƒê·ªông</a></li>

  <li class="nav-item"><a href="#danh-gia" data-target="#danhGia"><img src="assets/icon-heart.png" alt="" class="nav-icon">ƒê√°nh Gi√°</a></li>
</ul>

</nav>

    <!-- Content Wrapper -->
    <div class="content-wrapper">
      <div class="page" id="page-home">
      <!-- Hot Section with Side Image -->
      <div class="hot-section reveal">

        <div class="hot-events-container reveal">

          <div class="hot-header reveal">

            <span class="fire-icon">üî•</span>
            <span>HOT!!</span>
          </div>
          
          <div class="events-list">
            <div class="event-item reveal">
              <div class="event-date">
                <span class="day">30</span>
                <span class="month">/10</span>
              </div>
              <div class="event-details">
                <div class="event-title">"√Åi M·∫øt tr∆∞·ªõc" - ƒê∆∞·ª£c gi·∫£m 9...</div>
                <div class="event-desc">S·ª± ki·ªán ƒë·∫∑c bi·ªát d√†nh cho l·ªõp 9A12</div>
              </div>
            </div>
            
            <div class="event-item">
              <div class="event-date">
                <span class="day">28</span>
                <span class="month">/10</span>
              </div>
              <div class="event-details">
                <div class="event-title">"l·∫≠t ƒë·ªï HHT" - Giang ƒê·∫∑ng tr√™n...</div>
                <div class="event-desc">Ho·∫°t ƒë·ªông vui ch∆°i cu·ªëi tu·∫ßn</div>
              </div>
            </div>
          </div>
        </div>
      </div>

        <!-- Side Featured Image -->
        <div class="side-image-container reveal">
          <img src="assets/IMG_2873.JPG" alt="Featured Activity" class="side-featured-image">
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 3: BLANK -->
  <section class="blank-section" id="section3">
    <p>Section 3 - Coming Soon</p>
  </section>

  <div class="page" id="page-gioithieu" style="display:none;">
  <h2>Gi·ªõi Thi·ªáu Chung L·ªõp</h2>
  <div id="gioithieu-chung"></div>

  <h2>Danh S√°ch L·ªõp</h2>
  <div id="danh-sach-lop"></div>

  <h2>Li√™n H·ªá & Credit</h2>
  <div id="lien-he"></div>
</div>


<div class="page" id="page-cuahang" style="display:none;">
  <h2>Doanh nh√¢n nh√≠</h2>
  <div id="doanh-nhan-nhi"></div>

  <h2>Other</h2>
  <p>Coming soon...</p>
</div>


<div class="page" id="page-tintuc" style="display:none;">
  <h2>Ho·∫°t ƒë·ªông</h2>
  <div id="hoat-dong"></div>

  <h2>Th∆∞ vi·ªán</h2>
  <div id="thu-vien"></div>

  <h2>B√†i ƒëƒÉng</h2>
  <div id="bai-dang"></div>
</div>


<div class="page" id="page-danhgia" style="display:none;">
  <h2>ƒê√°nh gi√°</h2>
  <div id="danh-gia"></div>
</div>

<script>
(function(){
  const topNavbar    = document.getElementById('topNavbar');
  const topbarSpacer = document.getElementById('topbar-spacer');
  const navSpacer    = document.getElementById('nav-spacer');
  const mainNav      = document.querySelector('.main-nav');
  const section3     = document.getElementById('section3');
  const pages        = document.querySelectorAll('.page');
  const navLinks     = document.querySelectorAll('.nav-list > .nav-item > a');
  const submenuLinks = document.querySelectorAll('.dropdown-menu a:not(.coming-soon)');

  if (!topNavbar || !mainNav || !section3 || !topbarSpacer || !navSpacer) {
    console.warn('Navbar script: missing element(s). Aborting.');
    return;
  }

  // ----- helpers -----
  function topbarHeight(){
    return parseInt(getComputedStyle(document.documentElement).getPropertyValue('--topbar-h')) || 80;
  }

  // compute threshold (document Y where section3 top reaches topbar)
  function computeThreshold(){
    const rect = section3.getBoundingClientRect();
    const scrollY = window.scrollY || window.pageYOffset;
    return Math.round(rect.top + scrollY - topbarHeight());
  }

  let cachedThreshold = computeThreshold();
  window.addEventListener('resize', ()=> {
    cachedThreshold = computeThreshold();
    // correct spacers when resizing
    if (mainNav.classList.contains('fixed')) {
      navSpacer.style.height = mainNav.offsetHeight + 'px';
      topbarSpacer.style.height = '0px';
    } else {
      navSpacer.style.height = '0px';
      topbarSpacer.style.height = topbarHeight() + 'px';
    }
  });

  // ----- reveal observer (keep existing) -----
  const revealObserver = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.classList.add('show');
        revealObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.12 });
  document.querySelectorAll('.reveal').forEach(el => {
    // don't re-observe if already shown
    if (!el.classList.contains('show')) revealObserver.observe(el);
  });

  // ----- page switching (SPA-like) -----
  function resolvePageIdFrom(hash){
    let id = (hash || '').replace('#','') || 'home';
    if(document.getElementById('page-' + id)) return id;
    const fallback = id.split('-')[0];
    if(document.getElementById('page-' + fallback)) return fallback;
    return 'home';
  }

  function showPage(hash, push = true){
    const pageKey = resolvePageIdFrom(hash);
    pages.forEach(p => p.style.display = 'none');
    const pageEl = document.getElementById('page-' + pageKey);
    if(pageEl) pageEl.style.display = 'block';

    const hero = document.getElementById('heroContainer');
    const heroSec = document.getElementById('heroSection');
    if(pageKey === 'home'){
      if(hero) hero.style.display = '';
      if(heroSec) heroSec.style.display = '';
      // re-observe reveals inside home
      setTimeout(()=> {
        document.querySelectorAll('#page-home .reveal').forEach(el => {
          if(!el.classList.contains('show')) revealObserver.observe(el);
        });
      }, 40);
    } else {
      if(hero) hero.style.display = 'none';
      if(heroSec) heroSec.style.display = 'none';
    }

    if(push) history.pushState({page:pageKey}, '', '#' + pageKey);
    // recalc threshold because layout may change when switching pages
    cachedThreshold = computeThreshold();
    updateOnScroll(); // ensure nav/topbar state matches new page
  }

  navLinks.forEach(a => {
    a.addEventListener('click', e => {
      e.preventDefault();
      showPage(a.getAttribute('href') || '#home', true);
    });
  });

  submenuLinks.forEach(a => {
    a.addEventListener('click', e => {
      e.preventDefault();
      const sectionId = (a.getAttribute('href') || '#home').replace('#','');
      // parent page
      const drop = a.closest('.dropdown');
      const parentAnchor = drop ? (drop.querySelector('.nav-item > a') || drop.querySelector('.main-link') || drop.querySelector('a')) : null;
      const parentHref = parentAnchor ? parentAnchor.getAttribute('href') : '#home';
      showPage(parentHref, true);
      setTimeout(()=> {
        const t = document.getElementById(sectionId);
        if(t) t.scrollIntoView({behavior:'smooth', block:'start'});
      }, 120);
    });
  });

  window.addEventListener('popstate', ()=> showPage(location.hash || '#home', false));

  // ----- topbar/nav show-hide logic -----
  let hideTimer = null;

  function promoteNavFixed(){
    if(!mainNav.classList.contains('fixed')){
      mainNav.classList.add('fixed');
      navSpacer.style.height = mainNav.offsetHeight + 'px';
    }
  }
  function demoteNavSticky(){
    if(mainNav.classList.contains('fixed')){
      mainNav.classList.remove('fixed');
      setTimeout(()=> navSpacer.style.height = '0px', 60);
    }
  }

  function showTopbarAndPush(){
    // show topbar visually and restore spacer so it pushes the nav
    topNavbar.classList.remove('hidden');
    topbarSpacer.style.height = topbarHeight() + 'px';
    // if nav is fixed, ensure nav spacer pushes it down
    if(mainNav.classList.contains('fixed')) {
      navSpacer.style.height = mainNav.offsetHeight + 'px';
    }
  }
  function hideTopbarAndCollapse(){
    topNavbar.classList.add('hidden');
    topbarSpacer.style.height = '0px';
    // navSpacer left as-is so nav stays at top when fixed
  }

  function updateOnScroll(){
    const scrollY = window.scrollY || window.pageYOffset;
    // use cachedThreshold for stability
    const thr = cachedThreshold;

    // only hide topbar and promote nav when we've passed the threshold
    if(scrollY >= thr){
      hideTopbarAndCollapse();
      promoteNavFixed();
    } else {
      // before threshold: topbar visible, nav sticky (under topbar)
      showTopbarAndPush();
      demoteNavSticky();
    }
  }

  // ensure initial spacer heights
  topbarSpacer.style.height = topbarHeight() + 'px';
  navSpacer.style.height = '0px';
  // initial state
  showPage(location.hash || '#home', false);
  cachedThreshold = computeThreshold();
  updateOnScroll();

  window.addEventListener('scroll', updateOnScroll);

  // recalc threshold and spacers on resize
  window.addEventListener('resize', ()=> {
    cachedThreshold = computeThreshold();
    if(mainNav.classList.contains('fixed')){
      navSpacer.style.height = mainNav.offsetHeight + 'px';
      topbarSpacer.style.height = '0px';
    } else {
      navSpacer.style.height = '0px';
      topbarSpacer.style.height = topbarHeight() + 'px';
    }
    updateOnScroll();
  });

  // Hover-to-reveal: only enabled when past threshold and when nav is fixed
  document.addEventListener('mousemove', (e) => {
    const scrollY = window.scrollY || window.pageYOffset;
    if((mainNav.classList.contains('fixed') || scrollY >= cachedThreshold) && e.clientY <= 10){
      clearTimeout(hideTimer);
      showTopbarAndPush();
    }
  });

  // hide when mouse leaves topNavbar (only after threshold)
  topNavbar.addEventListener('mouseleave', () => {
    clearTimeout(hideTimer);
    hideTimer = setTimeout(()=> {
      const scrollY = window.scrollY || window.pageYOffset;
      if(scrollY >= cachedThreshold){
        hideTopbarAndCollapse();
      }
    }, 500);
  });

})();
</script>


</body>
</html>
